<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Encount</title>
	<link rel="stylesheet" href="css/styles.css"/>
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" />
    <!--[if lt IE 9]>-
        <script src="http://cdnjs.clou-dflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>
    <script type="text/x-handlebars" data-template-name="index">
        <h3>Choose a user!</h3>
        <ol>
        {{#each}}
            {{#link-to "user" this}}{{user_name}}{{/link-to}}
        {{/each}}
        </ol>
    </script>

    <script type="text/x-handlebars" data-template-name="user" class="test">
        <section id="user_page">
            <section id="selection_buttons" {{action "reset_new_buttons"}}>
                <button {{action "show_encounter"}} class="encounterBtn">Encounters</button>
                <button {{action "show_creature"}} class="creatureBtn">Creatures</button>
                <button {{action "show_player"}} class="playerBtn">Players</button>
                <!--<button {{action "show_none"}}>DM Mode</button>-->
            </section>

            <section id="selection_panels">

                {{#view App.showHide isVisible=showEncounter class="panel"}}
                    <h5>Encounters</h5>
                    {{input type="search" class="searchbox" placeholder="Find Encounter" value=encounterQuery}}
                    <ol>
                        <li class="new_item">
                            {{#view App.showHide isVisible=showNewEncounterButton class="open"}}
                                <button {{action "toggle_new_encounter"}} id="newEncBtn">+</button>
                            {{/view}}

                            {{#view App.showHide isVisible=showNewEncounter class="close"}}
                                <form {{action "new_encounter" this this.newEncounterName on="submit"}}>
                                    {{input value=newEncounterName id="newEncInput"}}
                                </form>
                            {{/view}}
                        </li>
                        {{#each filteredEncounters}}
                            {{#link-to "encounter" this tagName="li" class="encounterCard"}}
                                {{#view App.drag}}
                                    <h5>{{encounter_name}}</h5>
                                    <p>Players: {{players.length}}</p>
                                    <p>Creatures: {{creatures.length}}</p>
                                {{/view}}
                            {{/link-to}}
                        {{/each}}
                    </ol>
                {{/view}}


                {{#view App.showHide isVisible=showCreature class="panel"}}
                    <h5>Creatures</h5>
                    {{input type="search" class="searchbox" placeholder="Find Creature" value=creatureQuery}}
                    <ol>
                        <li class="new_item">
                            {{#view App.showHide isVisible=showNewCreatureButton class="open"}}
                                <button {{action "toggle_new_creature"}} id="newCreBtn">+</button>
                            {{/view}}

                            {{#view App.showHide isVisible=showNewCreature class="close"}}
                                <form {{action "new_creature" this this.newCreatureName on="submit"}}>
                                    {{input value=newCreatureName id="newCreInput"}}
                                </form>
                            {{/view}}
                        </li>
                        {{#each filteredCreatures}}
                            {{#link-to "creature" this tagName="li" class="creatureCard"}}
                                {{#view App.drag content=this}}
                                    <h5>{{creature_name}}</h5>
                                    <p>Level {{level}}</p>
                                {{/view}}
                            {{/link-to}}
                        {{/each}}
                    </ol>
                {{/view}}
                {{#view App.showHide isVisible=showPlayer class="panel"}}
                    <h5>Players</h5>
                    {{input type="search" class="searchbox" placeholder="Find Player" value=playerQuery }} 
                    <ol>
                        <li class="new_item">
                            {{#view App.showHide isVisible=showNewPlayerButton class="open"}}
                                <button {{action "toggle_new_player"}} id="newPlaBtn">+</button>
                            {{/view}}

                            {{#view App.showHide isVisible=showNewPlayer class="close"}}
                                <form {{action "new_player" this this.newPlayerName on="submit"}}>
                                    {{input value=newPlayerName id="newPlaInput"}}
                                </form>
                            {{/view}}
                        </li>
                        {{#each filteredPlayers}}
                            {{#link-to "player" this tagName="li" class="playerCard"}}
                                {{#view App.drag content=this}}
                                    <h5>{{player_name}}</h5>
                                    <p>Level {{level}}</p>
                                {{/view}}
                            {{/link-to}}
                        {{/each}}
                    </ol>
                {{/view}}
            </section>

            <section id="selection_display">
            {{outlet}}
            </section>
        </section>
    </script>

    <script type="text/x-handlebars" data-template-name="encounter">
        {{#view App.drop class="encounter"}}Drop here!
            {{#each players}}
                {{player_name}}
            {{/each}}
            {{#each creatures}}
                {{creature_name}}
            {{/each}}
        {{/view}}
    </script>

    <script type="text/x-handlebars" data-template-name="player">
        <section class="player">
            {{input value=player_name placeholder="Name" class="player_name"}}

            <section class="player_statblock">
                <div class="stat">
                    {{input value=strength type="number"}}
                    <label>Strength</label>
                </div>
                <div class="stat">
                    {{input value=constitution type="number"}}
                    <label>Constitution</label>                
                </div>
                <div class="stat">
                    {{input value=dexterity type="number"}}
                    <label>Dexterity</label>
                </div>
                <div class="stat">
                    {{input value=intelligence type="number"}}
                    <label>Intelligence</label>
                </div>
                <div class="stat">
                    {{input value=wisdom type="number"}}
                    <label>Wisdom</label>
                </div>
                <div class="stat">
                    {{input value=charisma type="number"}}
                    <label>Charisma</label>
                </div>
                <div class="stat">
                    {{input value=armor type="number"}}
                    <label>Armor</label>
                </div>
                <div class="stat">
                    {{input value=speed type="number"}}
                    <label>Speed</label>
                </div>
            </section>

            <section class="player_basic">
                {{textarea value=notes placeholder="Notes" class="player_notes"}}
                <div class="stat">
                    {{input value=initiative type="number"}}
                    <label>Initiative</label>
                </div>
                </div>
            </section>

        </section>
    </script>

    <script type="text/x-handlebars" data-template-name="creature">
        <section class="creature">
            <section class="creature_basic">
                {{input value=creature_name placeholder="Name" class="creature_name"}}
                {{input value=experience placeholder="Exp" class="creature_experience"}}
            </section>

            <section class="creature_hp">
                {{input value=hp_min placeholder="HP min" class="creature_hp_min"}}
                {{input value=hp_max placeholder="HP max" class="creature_hp_max"}}
            </section>

            <section class="creature_misc">
                {{textarea value=loot placeholder="Loot" class="creature_loot"}}
                {{textarea value=notes placeholder="Notes" class="creature_notes"}}
            </section>

            <section class="creature_statblock">
                <div class="stat"> 
                    <label>Strength</label>
                    {{input value=strength type="number" placeholder="Strength"}}
                </div>
                <div class="stat">
                    <label>Constitution</label>
                    {{input value=constitution type="number" placeholder="CON"}}
                </div>
                <div class="stat">
                    <label>Dexterity</label>
                    {{input value=dexterity type="number" placeholder="DEX"}}
                </div>
                <div class="stat">
                    <label>Intelligence</label>
                    {{input value=intelligence type="number" placeholder="INT"}}
                </div>
                <div class="stat">
                    <label>Wisdom</label>
                    {{input value=wisdom type="number" placeholder="WIS"}}
                </div>
                <div class="stat">
                    <label>Charisma</label>
                    {{input value=charisma type="number" placeholder="CHA"}}
                </div>
                <div class="stat">
                    <label>Armor</label>
                    {{input value=armor type="number" placeholder="AC"}}
                </div>
                <div class="stat">
                    <label>Speed</label>
                    {{input value=speed type="number" placeholder="Speed"}}
                </div>
                <div class="stat">
                    <label>Initiative</label>
                    {{input value=initiative type="number" placeholder="Initiative"}}
                </div>
            </section>

            <section class="creature_abilities">
                {{#each abilities}}
                    <section class="creature_ability">
                        <div class="ability_stat">
                            {{input value=ability_name placeholder="Ability name"}}
                        </div>
                        <div class="ability_stat">
                            <label>Description</label>
                            {{textarea value=description placeholder="Ability description"}}
                        </div>
                        <div class="ability_stat">
                            <label>Hit</label>
                            {{input value=hit_roll placeholder="Hit roll"}}
                        </div>
                        <div class="ability_stat">
                            <label>Damage</label>
                            {{input value=damage_roll placeholder="Damage roll"}}
                        </div>
                        <div class="ability_stat">
                            <label>Range</label>
                            {{input value=range placeholder="Range"}}
                        </div>
                        <div class="ability_stat">
                            <label>Quantity</label>
                            {{input value=quantity placeholder="Quantity"}}
                        </div>
                        <div class="ability_stat">
                            <label>Recharge</label>
                            {{input value=recharge placeholder="Recharge"}}
                        </div>
                        <div class="ability_stat">
                            <label>AOE</label>
                            {{view Ember.Select content=aoe_types prompt="AOE Type" selection=aoe_type}}
                        </div>
                    </section>
                {{/each}}

                {{#view App.showHide isVisible=showNewAbilityButton}}
                    <button {{action "toggle_new_ability"}}>+</button>
                {{/view}}

                {{#view App.showHide isVisible=showNewAbility class="newAbility"}}
                    <form {{action "new_ability" this this.newAbilityName on="submit"}}>
                        {{input value=newAbilityName}}
                    </form>
                    <button {{action "toggle_new_ability"}}>-</button>
                {{/view}}
            </section>
        </section>
    </script>
</body>
	
</html>

<!-- jQuery -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script>

<!-- Handlebars -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>

<!-- Ember -->
<script src="http://builds.emberjs.com/release/ember.js"></script>
<script src="http://builds.emberjs.com/beta/ember-data.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/ember-localstorage-adapter/0.3.1/localstorage_adapter.min.js"></script>

<!-- Firebase -->
<script src="https://cdn.firebase.com/js/client/1.0.17/firebase.js"></script>
<script src="js/emberfire.js"></script>

<!-- Libraries -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.7.0/moment.min.js"></script>

<!-- Project -->
<script src="ember/app.js"></script>
<script src="ember/router.js"></script>
<script src="ember/controller.js"></script>
<script src="ember/app_data.js"></script>
